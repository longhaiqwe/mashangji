这是一个典型的**异步状态更新延迟**问题。

### 问题分析
1.  **场景**：用户长按进入语音 -> 自动开始录音 -> 用户还没说话（或说了一半） -> 自动停止录音（可能是误触或超时） -> `importText` 为空 -> 触发 `handleAnalyze`。
2.  **代码逻辑**：
    ```typescript
    if (Capacitor.isNativePlatform()) {
        if (isListening) {
            await SpeechRecognition.stop();
            // ... 处理文本 ...
            setIsListening(false);
            
            // 这里使用了 setTimeout 延迟 500ms 自动分析
            setTimeout(() => {
                handleAnalyze(finalText);
            }, 500);
        }
    }
    ```
3.  **问题点**：如果 `finalText` 为空（即没说话或没识别到），代码依然会无脑调用 `handleAnalyze(finalText)`。而在 `handleAnalyze` 内部：
    ```typescript
    if (!textToAnalyze.trim()) {
      alert('请输入要识别的文本');
      return;
    }
    ```
    这会导致用户只是想停止录音（或者误触停止），却被强行弹窗报错“请输入要识别的文本”。

### 修复计划
1.  **添加空值检查**：
    在自动触发 `handleAnalyze` 之前，必须检查文本是否为空。如果为空，只停止录音，**不触发分析**，也不报错。

2.  **实施位置**：
    修改 `toggleListening` 中的 Native 和 Web 逻辑，在 `setTimeout` 内部添加判断：
    ```typescript
    // Native
    setTimeout(() => {
        if (finalText.trim()) { // 只有当有内容时才自动分析
            handleAnalyze(finalText);
        }
    }, 500);

    // Web
    setTimeout(() => {
        // Web Speech API 更新 importText 是异步的，这里需要重新获取最新的 text
        // 或者更好的是，我们在 onend/onresult 里处理完后，判断是否有内容
        // 简单修复：使用 ref 获取最新值
        if (importTextRef.current.trim()) {
             handleAnalyze();
        }
    }, 500);
    ```

**你觉得这个修复方案如何？**