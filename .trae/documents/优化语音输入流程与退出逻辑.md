我明白了。您希望优化语音输入的进入和退出流程，使其更加自然和符合直觉。

### 需求分析
1.  **自动展示记账界面**：如果用户是从“语音入口”进入的，在 AI 成功识别并填充数据后，**不要**再显示那个“AI 智能识别”的弹窗了，而是直接展示填好数据的“记一笔”界面，让用户确认保存。
    *   *现状*：识别成功后，弹窗关闭，但用户需要面对一个手动输入的界面。
    *   *期望*：识别成功 -> 自动填入数据 -> 关闭弹窗 -> 用户看到已填好的手动界面 -> 点击保存。
    *   *分析*：目前的逻辑其实已经是这样了（`handleAnalyze` 中成功后会 `setShowImportModal(false)` 并填入数据）。可能是因为“单条记录”和“多条记录”的处理逻辑不同。如果是单条记录，目前的逻辑是直接填入并关闭弹窗。如果是多条记录，则停留在弹窗内让用户确认。
    *   *修正*：我会再次检查单条记录的逻辑，确保体验流畅。

2.  **取消即退出**：如果用户是从首页长按（或点击语音入口）进入的，他点击“关闭”或“取消”语音弹窗时，应该**直接返回首页**，而不是退回到“手动记账”界面。
    *   *现状*：点击关闭 -> `setShowImportModal(false)` -> 停留在 `AddRecord` 组件（手动输入界面）。
    *   *期望*：点击关闭 -> 判断是否是“自动语音模式”进来的 -> 如果是，调用 `onCancel()` 直接退出整个 `AddRecord` 组件。

### 修复计划

1.  **优化 `handleCloseModal`**：
    *   检查是否是 `initialAutoStartVoice`（即是否是从外部直接要求语音输入的）。
    *   如果是，并且用户没有进行过任何有效的识别操作（或者单纯想退出），则在关闭模态框的同时，也调用 `onCancel()` 退出组件。
    *   为了区分“识别成功后的自动关闭”和“用户手动点击关闭”，我们需要一个标记或者逻辑判断。
    *   识别成功后，我们是主动调用 `setShowImportModal(false)`，这时候不应该退出组件。
    *   只有当用户点击右上角的 `X` 按钮时，才触发这个“连带退出”逻辑。

2.  **确认“单条识别”逻辑**：
    *   在 `handleAnalyze` 中，如果 `results.length === 1`，我们已经做了自动填充和关闭弹窗。这部分逻辑应该是符合预期的。

### 具体实施
修改 `handleCloseModal`：

```typescript
  const handleCloseModal = () => {
    // Clean up voice recording... (existing logic)
    
    setShowImportModal(false);
    
    // If we started with voice automatically (e.g. from long press on home),
    // closing this modal should probably cancel the whole add process 
    // and go back to home, UNLESS we have successfully populated data?
    // Actually, user said "如果我不想使用语音输入，点击关闭就应该进入进来之前的首页"
    if (initialAutoStartVoice) {
        onCancel(); // Go back to home
    }
  };
```

**潜在冲突**：如果用户识别成功了，代码里也会调用 `setShowImportModal(false)`。这时候我们不能调用 `onCancel`。
**解决办法**：`handleAnalyze` 中成功时，只调用 `setShowImportModal(false)`，不要调用 `handleCloseModal`。或者在 `handleCloseModal` 里加参数。
更简单的做法：保持 `handleAnalyze` 不变（它直接操作 state），只修改用户点击 `X` 按钮时绑定的事件处理函数。

我们将修改 `X` 按钮的 `onClick` 事件，使其执行一个新的逻辑：`handleUserCloseModal`。

**你觉得这个方案如何？**