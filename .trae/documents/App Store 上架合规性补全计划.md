# App Store 上架合规性补全计划

基于对现有代码库的分析，当前的 App **尚未达到** App Store 的上架要求。如果不进行修改直接提交，极大概率会被拒审。

主要缺失的功能是 **账号注销 (Account Deletion)** 和 **隐私政策入口 (Privacy Policy Link)**。

## 1. 现状评估

| 检查项 | 状态 | 说明 | App Store 审核风险 |
| :--- | :--- | :--- | :--- |
| **核心功能** | ✅ 完善 | 记账、AI语音、圈子、统计均已实现 | 低 |
| **用户系统** | ✅ 完善 | 支持注册登录 (Supabase) | 低 |
| **账号注销** | ❌ **缺失** | 仅支持“清空记录”，不支持“删除账号” | **高 (违反 Guideline 5.1.1)** |
| **隐私政策** | ⚠️ **缺失入口** | 文件存在 (`privacy-policy.md`) 但应用内无点击入口 | **高 (违反 Guideline 5.1.1)** |
| **EULA/举报** | ⚪️ 不需要 | App 似乎是个人工具，无公开社交广场，暂不需要 | 低 |

## 2. 实施计划

为了确保顺利上架，我建议执行以下修改计划：

### 步骤 1: 实现“账号注销”逻辑
**目标**: 允许用户在 App 内自主删除账号（或至少删除所有个人数据并注销）。
*   在 `authService.ts` 中添加 `deleteAccount` 方法。
*   逻辑顺序：
    1.  调用 `storageService` 删除该用户的所有记账记录 (`records`)。
    2.  调用 `storageService` 删除该用户的所有圈子 (`circles`)。
    3.  调用 `supabase.auth.signOut()` 退出登录。
    4.  (注：由于客户端无法直接删除 Supabase Auth 用户，我们将侧重于“清除所有用户数据并移除访问权限”，这对大多数工具类应用是合规的。)

### 步骤 2: 更新设置页 UI (`Settings.tsx`)
**目标**: 添加缺失的入口。
*   **添加“隐私政策”链接**: 在“关于麻上记”上方添加一个菜单项，点击后调用 `Browser.open` 或跳转到隐私政策网页。
*   **添加“注销账号”按钮**: 在页面最底部添加一个显著的红色按钮（区别于“清空记录”），并增加二次确认弹窗，明确告知用户此操作不可逆。

### 步骤 3: 优化体验 (可选)
*   确保 App 版本号 (`1.1.2`) 在设置页正确显示（目前是硬编码，建议统一管理）。

---

**您是否同意执行此计划？确认后我将为您编写代码。**
