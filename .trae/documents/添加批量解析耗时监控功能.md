您遇到的 `Session check timeout` 和 `406` 错误，主要原因是**AI 批量解析耗时较长，导致在等待期间或随后的操作中，由于 CPU 占用或网络波动，本地的登录会话检查（Session Check）超时了**。

当会话检查超时（您控制台中的 `Error: Session check timeout`），应用可能判定当前用户状态失效，导致后续向数据库插入记录时使用了无效的凭证，从而被服务器拒绝（返回 406 错误）。

### 修复计划

我将执行以下操作来修复此问题：

1.  **优化会话检查机制 (`services/authService.ts`)**：
    *   将获取会话的超时时间从 **5秒** 延长至 **20秒**。这可以防止在执行耗时操作（如 AI 分析）时，因系统繁忙导致的误判超时。

2.  **增强数据保存的健壮性 (`services/storageService.ts`)**：
    *   虽然主要问题在 Auth，但我也会检查批量插入的代码，确保它能正确处理大量数据，并明确记录具体的错误信息，以便排查。

这个修复将确保即使 AI 分析花费较长时间，您的登录状态也能保持有效，从而顺利完成数据导入。